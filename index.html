<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cult of the Lamb - Switch to PC Save Converter</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="background-decoration">
        <div class="floating-symbol symbol-1">ğŸ‘</div>
        <div class="floating-symbol symbol-2">â›§</div>
        <div class="floating-symbol symbol-3">ğŸŒ™</div>
        <div class="floating-symbol symbol-4">ğŸ‘ï¸</div>
        <div class="floating-symbol symbol-5">ğŸ•¯ï¸</div>
    </div>

    <div class="container">
        <header>
            <div class="logo">
                <span class="lamb-icon">ğŸ‘</span>
                <h1>Cult of the Lamb</h1>
                <p class="subtitle">Switch â†’ PC Save Converter</p>
            </div>
        </header>

        <main>
            <section class="info-card">
                <h2>ğŸ“œ How It Works</h2>
                <ol>
                    <li>Select your <strong>Legacy</strong> Switch save files (<code>meta_0</code>, <code>slot_0</code>)</li>
                    <li>The tool removes the Nintendo header and decompresses the data</li>
                    <li>Downloads the converted <code>.json</code> files ready for PC</li>
                </ol>
                <div class="format-info">
                    <div class="format-badge legacy">
                        <strong>Legacy Saves (Supported)</strong>
                        <span><code>slot_0</code>, <code>meta_0</code> â†’ <code>.json</code></span>
                    </div>
                    <div class="format-badge unsupported">
                        <strong>Woolhaven MP (Unsupported)</strong>
                        <span><code>slot_0MP</code> files cause bugs on PC</span>
                    </div>
                </div>
            </section>

            <section class="converter-card">
                <h2>ğŸ”„ Convert Your Saves</h2>
                
                <div class="drop-zone" id="dropZone">
                    <div class="drop-zone-content">
                        <span class="drop-icon">ğŸ“</span>
                        <p>Drag & drop your Switch save files here</p>
                        <p class="drop-hint">Legacy JSON files recommended</p>
                        <input type="file" id="fileInput" multiple accept="*" hidden>
                    </div>
                </div>

                <div class="file-list" id="fileList">
                    <h3>Selected Files</h3>
                    <ul id="selectedFiles"></ul>
                </div>

                <div class="button-group">
                    <button id="convertBtn" class="btn btn-primary" disabled>
                        <span class="btn-icon">âœ¨</span>
                        Convert & Download
                    </button>
                    <button id="clearBtn" class="btn btn-secondary" disabled>
                        <span class="btn-icon">ğŸ—‘ï¸</span>
                        Clear
                    </button>
                </div>

                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p class="progress-text" id="progressText">Processing...</p>
                </div>

                <div class="results" id="results">
                    <h3>âœ… Conversion Complete!</h3>
                    <ul id="resultsList"></ul>
                </div>
            </section>

            <section class="help-card">
                <h2>â“ Need Help?</h2>
                <details>
                    <summary>Where do I find my Switch save files?</summary>
                    <p>If using a Switch emulator (like Yuzu or Ryujinx), saves are typically located in the emulator's user data folder under the game's title ID. For actual Switch hardware, you'll need homebrew tools (JKSV, Checkpoint)to extract saves.</p>
                </details>
                <details>
                    <summary>Where do I put the converted files on PC?</summary>
                    <p>On Windows, PC saves are usually located at:<br>
                    <code>%USERPROFILE%\AppData\LocalLow\Massive Monster\Cult Of The Lamb\saves\</code></p>
                </details>
                <details>
                    <summary>Why didn't my MP save work?</summary>
                    <p><strong>MP (MessagePack) saves are not officially supported.</strong> While the converter can physically process them, the PC version of the game often fails to read the converted data correctly, resulting in frozen time or broken followers.</p>
                </details>
                <details>
                    <summary>Do achievements transfer?</summary>
                    <p><strong>No â€” achievements do not transfer from Switch to Steam. I recommend using a tool like <a href="https://github.com/gibbed/SteamAchievementManager" target="_blank" rel="noopener">Steam Achievement Manager</a> to manually unlock achievements on PC after converting your saves.</strong></p>
                </details>
            </section>
        </main>

        <footer>
            <p>Made with ğŸ–¤ for the Cult | Not affiliated with Massive Monster or Devolver Digital</p>
            <p class="disclaimer">Make sure to backup your saves</p>
            <div class="footer-links">
                <a href="https://github.com/0dm/CultOfTheLamb-SwitchToPCSaves" target="_blank" rel="noopener">GitHub</a>
                <a href="https://ko-fi.com/0dm" target="_blank" rel="noopener">Ko-fi</a>
            </div>
        </footer>
    </div>

    <div id="warningModal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <span class="warning-icon">âš ï¸</span>
                <h3>Unsupported Format Detected</h3>
            </div>
            <div class="modal-body">
                <p>You have selected a <strong>Woolhaven (MP)</strong> save file.</p>
                <p>These files are <strong>not fully supported</strong>. Converting MP files often results in a buggy save on PC where time does not advance and followers do not behave correctly.</p>
                <p>We strongly recommend using only Legacy (JSON) saves.</p>
            </div>
            <div class="modal-footer">
                <button id="modalCancelBtn" class="btn btn-secondary">Cancel</button>
                <button id="modalProceedBtn" class="btn btn-danger">I understand, proceed anyway</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <script src="script.js"></script>
</body>
</html>